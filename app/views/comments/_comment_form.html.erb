<% form_for Comment.new do |f| %>
  <%= f.text_field :body %>
  <% if obj && obj.kind_of?(ActiveRecord::Base) %>
    <%= f.hidden_field :target_type, :value => obj.class.name %>
    <%= f.hidden_field :target_id, :value => obj.id %>
  <% end %>
  <%= f.submit 'that is what I think' %>
<% end %>
